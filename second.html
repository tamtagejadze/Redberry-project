<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@1,800&family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@1,500&family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@1,500&family=Open+Sans:wght@600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@1,500&family=Open+Sans:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@1,500&family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style/style.css">
    <title>Redberry Knight Cup</title>
</head>
</head>
<body>
    <div class="container">
        <div class="left-content">
            <header>
                <div class="header">
                    <img class="logo" src="images/Vector.png" alt="">
                    <img class="header-title" src="images/Redberry Knight Cup.png" alt="">                    
                </div>
            </header>
            <div>
                <img class="second-page-photo" src="images/1.png" alt="">
            </div>
            <div class="second-page-left-title-div">
                <div>
                    <h2>“When you see a good move,</h2>
                </div>
                <div>
                    <h2>look for a better one.”</h2>
                </div>
                <div>
                    <h3>-Emanuel Lasker</h3>
                </div>
            </div>
        </div>
        <div class="second-page-right-content">
            <div class="top-right">
                <span class="top-right-title">Start creating your account</span>
            </div>
            <div class="steps">
                <div class="steps-top">
                    <div id="one">1</div>
                    <div class="line"></div>
                    <div id="two">2</div>
                </div>
                <div class="steps-bottom">
                    <span class="personal-information">Personal information</span>
                    <span class="chess-experience">Chess experience</span>
                </div>
            </div>
            <div class="div-info">
                <p class="personal-info">Personal information</p>
                <p class="basic-info">This is basic informaton fields</p>
            </div>
            <div>
                
                <form id="registration" action="https://chess-tournament-api.devtest.ge/api/register" method="POST">
                    <div>
                        <div id="username-div">
                            <input id="username" type="text" name="username" placeholder="Name *">
                        </div>
                        <div id="error_username" class="error"></div>
                    </div>
                    <div>
                        <div id="mail-div">
                            <input id="mail" type="email" name="email" placeholder="Email address *">
                        </div>
                        <div id="error_email" class="error"></div>
                    </div>
                    <div>
                        <div id="tel-div">
                            <input id="tel" type="tel" name="tel" placeholder="Phone number *">
                        </div>
                        <div id="error_tel" class="error"></div>
                    </div>
                    <div>
                        <div id="date-div">
                            <input id="date" type="date" name="date" placeholder="Date of Birth *">
                        </div>
                    </div>
                    <div class="buttons-s">
                        <div class="btn-back-s">
                            <a class="back-a-s" href="index.html"><button class="back-s">Back</button></a>
                        </div>
                        <div class="btn-next-s">
                            <a class="next-a-s" href="third.html"><button type="submit" id="next-s">
                                <img class="img-next-s" src="images/next.png" alt="">
                                <img class="img-arrow-s" src="images/arrow.png" alt="">
                            </button></a>
                        </div>
                    </div>
                </form>

            </div>

        </div>
    </div>

    <script>
        // Validation
        let registrationForm = document.getElementById('registration');

        registrationForm.addEventListener('submit',function(e){
            e.preventDefault(); 

            let form = e.target; 
            let errors = {}; 

            let username = document.querySelector('[name = "username"]').value; 
            if(username === ''){
                errors.username = 'Username is required'
            }else if(username.length < 2){ 
                errors.username = "Min 2 letters"; 
            }

            let email = document.querySelector('[name = "email"]').value;
            if(email === ''){
                errors.email = 'Email address is required'
            }else if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)){
                errors.email = "Invalid Email"
            }

            let tel = document.querySelector('[name = "tel"]').value;
            if(tel === ''){
                errors.tel = 'Phone number is required'
            }else if(!/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{3})$/.test(tel)){
                errors.tel = "Invalid Phone Number"
            }

            form.querySelectorAll('.error').forEach(item => {
                item.textContent = '';
            });
            
            for (let name in errors){
                let namePlacedolder = document.getElementById('error_' + name); 
               
                if(namePlacedolder) {
                    namePlacedolder.textContent = errors[name]; 
                }
                form.querySelector('[name = "'+ name +'"]').classList.add('error');
            }

            form.submit(); 

            console.log(errors)
        })



    </script>
</body>
</html>